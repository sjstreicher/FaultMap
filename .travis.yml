language: python
python:
  - "2.7"
virtualenv:
    system_site_packages: true

before_install:
  - pwd # Show current directory
  - sudo apt-get update
  - sudo apt-get install pkg-config default-jdk wget python python-{dev,pip,numpy,scipy,matplotlib,cairo} cython lib{freetype6,xft,png,xext,openblas,lapack,hdf5-serial}-dev gfortran
 
# command to install dependencies, e.g. pip install -r requirements.txt --use-mirrors
install:
  # - pip install numpy # already installed above via apt-get
  - pip install numexpr
  - pip install -r requirements.txt
  
before_script:
  # Make directory for custom installs 
  - cd ~
  - sudo mkdir repos
  - cd repos
  # Install pathos
  - sudo git clone git://github.com/uqfoundation/pathos.git
  - cd pathos
  - sudo wget http://dev.danse.us/packages/pathos-0.1a1.tgz
  - sudo tar -xvzf pathos-0.1a1.tgz
  - sudo easy_install -f . pathos-0.1a1
  - sudo python setup.py install
  
  # Install pyunicorn
  - cd ~/repos
  - sudo wget https://www.dropbox.com/s/s5giot81t87h8h4/pyunicorn-0.3.2.tar.gz
  - sudo tar -xvzf pyunicorn-0.3.2.tar.gz
  - cd pyunicorn-0.3.2
  - sudo python setup.py install
    
  # Install JPype1
  - cd ~/repos
  - sudo git clone git://github.com/originell/jpype.git
  - cd jpype
  - sudo git reset --hard 50cfd194bb20631feda50fedae41ed18eeca1668
  - sudo python setup.py install
  
  # Return to home directory - not sure if necessary for correct
  # script execution
  - cd ~
  

# command to run tests, e.g. python setup.py test
script:
  # run tests
  - nosetests -w ~/build/SimonStreicher/FaultMap